import{r,j as e,c as _}from"./index-DXf8nAVY.js";import{h as Pe,u as De,b as we,M as Ee,S as _e,o as oe,H as T}from"./MainLayout-CzrU36Jf.js";import{S as le}from"./section-heading-FuyfHM6C.js";import{P as $,B as h}from"./index-BfwGU7cQ.js";import{C as ce,a as me,b as de,c as he,d as ue,e as ge}from"./card-DwPcjQ2E.js";import{T as $e,a as ze,b as pe,c as xe}from"./tabs-Bj92W_sn.js";import{I as y}from"./input-DsrJwZ2l.js";import{T as Ye}from"./textarea-CgIZF4h0.js";import{L as b}from"./label-C3spFS_x.js";import{D as q,a as R,b as fe,c as je,e as He}from"./dialog-DVup0unk.js";import{C as ve}from"./circle-plus-MOuYE-jb.js";import{C as Ne}from"./clock-CxwPkLec.js";import{M as F}from"./message-square-BTt4m23t.js";import{T as Ke}from"./trash-2-CsUf3Mn4.js";import{A as Oe}from"./index-CFBOoQuX.js";import{m as Be}from"./proxy-CP4viMwe.js";import{X as Je}from"./x-CYZ6D4SI.js";var z="Avatar",[Ge,pa]=Pe(z),[Ve,ye]=Ge(z),be=r.forwardRef((i,t)=>{const{__scopeAvatar:l,...c}=i,[u,o]=r.useState("idle");return e.jsx(Ve,{scope:l,imageLoadingStatus:u,onImageLoadingStatusChange:o,children:e.jsx($.span,{...c,ref:t})})});be.displayName=z;var Se="AvatarImage",Ce=r.forwardRef((i,t)=>{const{__scopeAvatar:l,src:c,onLoadingStatusChange:u=()=>{},...o}=i,d=ye(Se,l),p=Ze(c,o.referrerPolicy),f=De(j=>{u(j),d.onImageLoadingStatusChange(j)});return we(()=>{p!=="idle"&&f(p)},[p,f]),p==="loaded"?e.jsx($.img,{...o,ref:t,src:c}):null});Ce.displayName=Se;var ke="AvatarFallback",Ae=r.forwardRef((i,t)=>{const{__scopeAvatar:l,delayMs:c,...u}=i,o=ye(ke,l),[d,p]=r.useState(c===void 0);return r.useEffect(()=>{if(c!==void 0){const f=window.setTimeout(()=>p(!0),c);return()=>window.clearTimeout(f)}},[c]),d&&o.imageLoadingStatus!=="loaded"?e.jsx($.span,{...u,ref:t}):null});Ae.displayName=ke;function Ze(i,t){const[l,c]=r.useState("idle");return we(()=>{if(!i){c("error");return}let u=!0;const o=new window.Image,d=p=>()=>{u&&c(p)};return c("loading"),o.onload=d("loaded"),o.onerror=d("error"),o.src=i,t&&(o.referrerPolicy=t),()=>{u=!1}},[i,t]),l}var Me=be,Le=Ce,Ie=Ae;const P=r.forwardRef(({className:i,...t},l)=>e.jsx(Me,{ref:l,className:_("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",i),...t}));P.displayName=Me.displayName;const D=r.forwardRef(({className:i,...t},l)=>e.jsx(Le,{ref:l,className:_("aspect-square h-full w-full",i),...t}));D.displayName=Le.displayName;const E=r.forwardRef(({className:i,...t},l)=>e.jsx(Ie,{ref:l,className:_("flex h-full w-full items-center justify-center rounded-full bg-muted",i),...t}));E.displayName=Ie.displayName;const xa=()=>{const i="user_"+Math.random().toString(36).substr(2,9),[t,l]=r.useState(null),[c,u]=r.useState(!1),[o,d]=r.useState([]),[p,f]=r.useState(!1),[j,Y]=r.useState(""),[S,M]=r.useState(null),[C,H]=r.useState(""),[Ue,k]=r.useState(!1),[K,O]=r.useState(""),[B,J]=r.useState(""),[G,V]=r.useState(""),[Z,Q]=r.useState(null),[W,X]=r.useState("Personal Growth"),g=(a,s)=>Math.floor(Math.random()*(s-a+1))+a,A=(a=>{const s=[],m=["Ahmed","Ali","Usman","Bilal","Omar","Haris","Saad","Zubair","Faisal","Kashif","Nabeel","Tariq","Waqar","Yasir","Zahid"],n=["Fatima","Ayesha","Hina","Khadija","Nadia","Rabia","Uzma","Yasmin","Amina","Gulnaz","Lubna","Parveen","Rukhsana","Sara","Zainab"],x=["Khan","Ali","Malik","Ahmed","Shah","Hassan","Iqbal","Akhtar","Farooq","Javed","Asif","Chaudhry","Mohammad","Siddiqui"];for(let v=0;v<a;v++){const ne=v%2===0?m[Math.floor(Math.random()*m.length)]:n[Math.floor(Math.random()*n.length)],ie=x[Math.floor(Math.random()*x.length)];s.push({name:`${ne} ${ie}`,avatar:`https://ui-avatars.com/api/?name=${ne}+${ie}&background=random`})}return s})(50),N=a=>{const s=[],m=["This is so inspiring! Mashallah!","Keep up the good work! Allah bless you.","I went through something similar in Pakistan.","Thank you for sharing your experience.","This gives me hope for our country!","Amazing journey! Pakistan Zindabad!","You're an inspiration to us all.","SubhanAllah, what a story!","May Allah reward you for your efforts.","This is the Pakistan we need to see!","Your story touched my heart.","JazakAllah for sharing this.","We need more people like you in Pakistan.","This is the true spirit of Pakistan!","Allah has blessed you indeed."];for(let n=0;n<a;n++){const x=A[Math.floor(Math.random()*A.length)];s.push({id:n+1,user:x.name,avatar:x.avatar,text:m[Math.floor(Math.random()*m.length)],timestamp:`${g(1,24)} ${g(1,2)===1?"hours":"days"} ago`})}return s},w=a=>{const s=[],m=["like","love","support"];for(let n=0;n<a;n++){const x=A[Math.floor(Math.random()*A.length)];s.push({userId:`user_${x.name.replace(/\s+/g,"_").toLowerCase()}_${n}`,type:m[Math.floor(Math.random()*m.length)]})}return s},ee=[{id:1,name:"Ahmed Khan",location:"Karachi",content:"Overcame financial hardships to build a successful small business that now employs 15 people in Karachi. The journey wasn't easy but with determination and community support, I was able to turn my small idea into a thriving business.",imageUrl:"https://images.pexels.com/photos/25365249/pexels-photo-25365249/free-photo-of-bearded-brunette-sitting-on-chair.jpeg?auto=compress&cs=tinysrgb&w=600",category:"Entrepreneurship",date:"March 15, 2025",isUserStory:!1,reactions:w(g(200,350)),comments:N(g(6,15))},{id:2,name:"Usman Malik",location:"Lahore",content:"After completing my education against all odds, I started a free tutoring center in my neighborhood. Today we help over 50 students daily with their studies, and many have gone on to excel in their exams.",imageUrl:"https://images.unsplash.com/photo-1568602471122-7832951cc4c5?auto=format&fit=crop&w=800&q=80",category:"Education",date:"February 28, 2025",isUserStory:!1,reactions:w(g(200,350)),comments:N(g(6,15))},{id:3,name:"Bilal Hassan",location:"Islamabad",content:"Recovered from a serious accident that left me bedridden for months. Through rehabilitation and community support, I not only recovered but also completed a marathon last year to raise funds for others in similar situations.",imageUrl:"https://images.pexels.com/photos/20317983/pexels-photo-20317983/free-photo-of-a-man-standing-by-the-railing-in-a-shopping-mall.jpeg?auto=compress&cs=tinysrgb&w=600",category:"Health",date:"January 10, 2025",isUserStory:!1,reactions:w(g(200,350)),comments:N(g(6,15))},{id:4,name:"Fatima Ali",location:"Peshawar",content:"As one of the first female tech entrepreneurs from Peshawar, I faced many challenges. But today my software company employs 25 people, half of them women, and we're working on projects that help local businesses go digital.",imageUrl:"https://images.pexels.com/photos/19248047/pexels-photo-19248047/free-photo-of-pink-western-dress-style-shoot-by-dhanno.jpeg?auto=compress&cs=tinysrgb&w=600",category:"Career Development",date:"December 5, 2024",isUserStory:!1,reactions:w(g(200,350)),comments:N(g(6,15))},{id:5,name:"Ayesha Khan",location:"Quetta",content:"Started a community kitchen during the pandemic that has now evolved into a full-fledged food distribution network, serving over 200 meals daily to those in need across Quetta. Our volunteers come from all walks of life.",imageUrl:"https://images.pexels.com/photos/19389296/pexels-photo-19389296/free-photo-of-eastern-dresses-2024-shoot-by-dhanno.jpeg?auto=compress&cs=tinysrgb&w=600",category:"Community Service",date:"November 20, 2024",isUserStory:!1,reactions:w(g(200,350)),comments:N(g(6,15))}];r.useEffect(()=>{const a=localStorage.getItem("communityStories");if(a)try{const s=JSON.parse(a);Array.isArray(s)&&d(s)}catch(s){console.error("Failed to parse stories",s),d(ee)}else d(ee)},[]),r.useEffect(()=>{o.length>0&&localStorage.setItem("communityStories",JSON.stringify(o))},[o]);const Te=a=>{a.preventDefault();const s={id:Date.now(),name:K,location:B,content:G,imageUrl:Z?URL.createObjectURL(Z):"https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=800&q=80",category:W,date:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),isUserStory:!0,reactions:[],comments:[]};d(m=>[...m,s]),qe(),f(!1)},qe=()=>{O(""),J(""),V(""),Q(null),X("Personal Growth")},Re=a=>{d(s=>s.filter(m=>m.id!==a))},L=(a,s)=>{d(m=>m.map(n=>{if(n.id!==a)return n;const x=n.reactions.findIndex(v=>v.userId===i);return x>=0?{...n,reactions:n.reactions.filter((v,re)=>re!==x)}:{...n,reactions:[...n.reactions,{userId:i,type:s}]}}))},ae=a=>{if(!C.trim())return;const s={id:Date.now(),user:"You",avatar:"",text:C,timestamp:"Just now"};d(m=>m.map(n=>n.id===a?{...n,comments:[s,...n.comments]}:n)),H("")},I=a=>{var s;return((s=a==null?void 0:a.reactions)==null?void 0:s.length)||0},U=a=>a!=null&&a.reactions?a.reactions.some(s=>s.userId===i):!1,se=o.filter(a=>a.isUserStory&&(a.name.toLowerCase().includes(j.toLowerCase())||a.category.toLowerCase().includes(j.toLowerCase()))),te=o.filter(a=>a.name.toLowerCase().includes(j.toLowerCase())||a.category.toLowerCase().includes(j.toLowerCase())),Fe=["Personal Growth","Entrepreneurship","Health","Education","Parenting","Community Service","Career Development"];return e.jsxs(Ee,{children:[e.jsx("section",{className:"bg-gradient-to-r from-humqadam-pink/20 to-humqadam-pink/10 py-16 ",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-full mx-auto text-center",children:[e.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold mb-4",children:"Community Stories"}),e.jsx("p",{className:"text-gray-700 text-lg mb-6",children:"Inspiring journeys of resilience and achievement"}),e.jsxs(h,{className:"bg-humqadam-pink hover:bg-humqadam-pink/90 justify gap-2",onClick:()=>f(!0),children:[e.jsx(ve,{size:18}),e.jsx("span",{children:"Share Your Story"})]})]})})}),e.jsx("section",{className:"py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx(le,{title:"Browse Stories",subtitle:"Find inspiration from community members",alignment:"center"}),e.jsxs("div",{className:"relative mb-12 max-w-2xl mx-auto",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(_e,{className:"w-5 h-5 text-gray-400"})}),e.jsx(y,{type:"search",className:"pl-10",placeholder:"Search stories...",value:j,onChange:a=>Y(a.target.value)})]}),e.jsxs($e,{defaultValue:"community",className:"w-full",children:[e.jsxs(ze,{className:"grid w-full grid-cols-2",children:[e.jsx(pe,{value:"community",className:"text-base",children:"Community Stories"}),e.jsx(pe,{value:"my-stories",className:"text-base",children:"My Stories"})]}),e.jsx(xe,{value:"community",className:"mt-8",children:te.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"No stories found"}),e.jsx(h,{variant:"outline",className:"border-humqadam-pink text-humqadam-pink",onClick:()=>Y(""),children:"View All Stories"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:te.map(a=>{const s=U(a);return e.jsxs(ce,{className:"hover:shadow-lg transition-shadow",children:[a.imageUrl&&e.jsx("div",{className:"h-48 overflow-hidden",children:e.jsx("img",{src:a.imageUrl,alt:a.name,className:"w-full h-full object-cover"})}),e.jsxs(me,{children:[e.jsx(de,{children:a.name}),e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),a.location," • ",e.jsx(Ne,{className:"h-4 w-4"})," ",a.date]})]}),e.jsxs(ue,{children:[e.jsx("p",{className:"text-gray-700 mb-2 line-clamp-3",children:a.content}),e.jsx(h,{variant:"link",className:"text-humqadam-pink p-0 h-auto",onClick:()=>{l(a),u(!0)},children:"Read more"})]}),e.jsx(ge,{className:"flex flex-col gap-3",children:e.jsxs("div",{className:"flex items-center gap-4 w-full",children:[e.jsxs(h,{variant:"ghost",size:"sm",className:"gap-1",onClick:()=>L(a.id,"like"),children:[e.jsx(T,{className:`h-4 w-4 ${s?"text-red-500 fill-red-500":""}`}),e.jsx("span",{children:I(a)})]}),e.jsxs(h,{variant:"ghost",size:"sm",className:"gap-1",onClick:()=>{M(a),k(!0)},children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{children:a.comments.length})]})]})})]},a.id)})})}),e.jsx(xe,{value:"my-stories",className:"mt-8",children:se.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"You haven't shared any stories yet"}),e.jsxs(h,{className:"bg-humqadam-pink hover:bg-humqadam-pink/90",onClick:()=>f(!0),children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Share Your First Story"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:se.map(a=>{const s=U(a);return e.jsxs(ce,{className:"hover:shadow-lg transition-shadow",children:[a.imageUrl&&e.jsx("div",{className:"h-48 overflow-hidden",children:e.jsx("img",{src:a.imageUrl,alt:a.name,className:"w-full h-full object-cover"})}),e.jsxs(me,{children:[e.jsx(de,{children:a.name}),e.jsxs(he,{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4"}),a.location," • ",e.jsx(Ne,{className:"h-4 w-4"})," ",a.date]})]}),e.jsxs(ue,{children:[e.jsx("p",{className:"text-gray-700 mb-2 line-clamp-3",children:a.content}),e.jsx(h,{variant:"link",className:"text-humqadam-pink p-0 h-auto",onClick:()=>{l(a),u(!0)},children:"Read more"})]}),e.jsxs(ge,{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4 w-full",children:[e.jsxs(h,{variant:"ghost",size:"sm",className:"gap-1",onClick:()=>L(a.id,"like"),children:[e.jsx(T,{className:`h-4 w-4 ${s?"text-red-500 fill-red-500":""}`}),e.jsx("span",{children:I(a)})]}),e.jsxs(h,{variant:"ghost",size:"sm",className:"gap-1",onClick:()=>{M(a),k(!0)},children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{children:a.comments.length})]})]}),e.jsxs(h,{variant:"destructive",size:"sm",onClick:()=>Re(a.id),className:"w-full",children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]},a.id)})})})]})]})}),e.jsx(Oe,{children:c&&t&&e.jsx(q,{open:c,onOpenChange:u,children:e.jsx(R,{className:"sm:max-w-2xl max-h-[90vh] overflow-y-auto p-0",children:e.jsxs(Be.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"relative",children:[e.jsx("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 z-10 rounded-full bg-white/80 p-2 backdrop-blur-sm hover:bg-gray-100",children:e.jsx(Je,{className:"h-5 w-5"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[t.imageUrl&&e.jsx("div",{className:"relative h-96 md:h-full",children:e.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs(P,{children:[e.jsx(D,{src:t.imageUrl}),e.jsx(E,{children:t.name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.location})]})]}),e.jsx("div",{className:"prose max-w-none mb-6",children:e.jsx("p",{className:"whitespace-pre-line",children:t.content})}),e.jsxs("div",{className:"flex items-center gap-4 border-t pt-4",children:[e.jsxs(h,{variant:"ghost",size:"sm",className:"gap-1",onClick:()=>L(t.id,"like"),children:[e.jsx(T,{className:`h-5 w-5 ${U(t)?"text-red-500 fill-red-500":""}`}),e.jsx("span",{children:I(t)})]}),e.jsxs(h,{variant:"ghost",size:"sm",className:"gap-1",onClick:()=>{k(!0),M(t)},children:[e.jsx(F,{className:"h-5 w-5"}),e.jsx("span",{children:t.comments.length})]})]})]})]})]})})})}),e.jsx(q,{open:Ue,onOpenChange:k,children:S&&e.jsxs(R,{className:"sm:max-w-[600px] h-[80vh] flex flex-col",children:[e.jsx(fe,{children:e.jsx(je,{children:"Comments"})}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-4",children:S.comments.map(a=>e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(P,{children:[e.jsx(D,{src:a.avatar}),e.jsx(E,{children:a.user.charAt(0)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:a.user}),e.jsx("span",{className:"text-xs text-gray-500",children:a.timestamp})]}),e.jsx("p",{className:"text-gray-700 mt-1",children:a.text})]})]},a.id))}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{placeholder:"Add a comment...",value:C,onChange:a=>H(a.target.value),onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),ae(S.id))}}),e.jsx(h,{onClick:()=>ae(S.id),disabled:!C.trim(),children:"Post"})]})})]})}),e.jsx("section",{className:"py-12 bg-humqadam-pink/10 rounded-lg mx-4 my-8",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx(le,{title:"Share Your Journey",subtitle:"Your experience could inspire others",alignment:"center"}),e.jsx("div",{className:"max-w-2xl mx-auto mt-8",children:e.jsx("p",{className:"text-gray-700 mb-8",children:"Every story helps strengthen our community. Share your challenges and achievements."})})]})}),e.jsx(q,{open:p,onOpenChange:f,children:e.jsxs(R,{className:"sm:max-w-[600px]",children:[e.jsx(fe,{children:e.jsx(je,{children:"Share Your Story"})}),e.jsxs("form",{onSubmit:Te,className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(b,{htmlFor:"name",className:"text-right",children:"Your Name"}),e.jsx(y,{id:"name",value:K,onChange:a=>O(a.target.value),className:"col-span-3",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(b,{htmlFor:"location",className:"text-right",children:"Location"}),e.jsx(y,{id:"location",value:B,onChange:a=>J(a.target.value),className:"col-span-3",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(b,{htmlFor:"category",className:"text-right",children:"Category"}),e.jsx("select",{id:"category",value:W,onChange:a=>X(a.target.value),className:"col-span-3 border rounded-md p-2",required:!0,children:Fe.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(b,{htmlFor:"story",className:"text-right",children:"Your Story"}),e.jsx(Ye,{id:"story",value:G,onChange:a=>V(a.target.value),className:"col-span-3",rows:8,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(b,{htmlFor:"image",className:"text-right",children:"Photo (Optional)"}),e.jsx(y,{id:"image",type:"file",onChange:a=>{var s;return Q(((s=a.target.files)==null?void 0:s[0])||null)},className:"col-span-3",accept:"image/*"})]}),e.jsx(He,{children:e.jsx(h,{type:"submit",className:"bg-humqadam-pink hover:bg-humqadam-pink/90",children:"Share Story"})})]})]})})]})};export{xa as default};
