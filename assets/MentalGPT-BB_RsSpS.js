import{r as o,j as t,c as z}from"./index-DXf8nAVY.js";import{M as D}from"./MainLayout-CzrU36Jf.js";import{S as H}from"./section-heading-FuyfHM6C.js";import{c as L,B as k}from"./index-BfwGU7cQ.js";import{I as W}from"./input-DsrJwZ2l.js";import{C as P,d as R}from"./card-DwPcjQ2E.js";import{m as B}from"./proxy-CP4viMwe.js";import{B as A}from"./bot-CkqC9M8G.js";import{U as K}from"./user-C6N0Yc8t.js";import{C as Y}from"./check-QwkhJHUz.js";import{S as $}from"./send-Blw69xxq.js";import{M as _,r as q}from"./index-bx_cZ3Qk.js";import"./x-CYZ6D4SI.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=L("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),J="#E0F2FE",U="#FFFFFF",a="#3B82F6",h="#7C3AED",f="#E5E7EB",Q="#3B82F6",X="#FFFFFF",V="#F3F4F6",Z="#1F2937",ee="#FEE2E2",te="#B91C1C",E="#6B7280",se='You are a therapist specializing in mental health. Your sole purpose is to provide information and answer questions strictly based on mental health topics. If a user asks about any topic other than mental health, you must politely state that you are unable to assist as your expertise is limited to this area. When asked "Who are you?" or "What is your name?", respond: "I am your virtual therapist, here to assist you with anything related to mental health issues." Ensure responses are comprehensive, using bullet lists and friendly emojis. Tone should be professional, informative, and empathetic.',re=["I'm feeling overwhelmed lately, can you help?","How can I manage stress more effectively?","I had a really difficult day, I just need to talk.","What are some simple self-care techniques I can try?","I'm struggling with motivation.","How can I set healthy boundaries in relationships?","I'm feeling anxious about something."],fe=()=>{const[d,y]=o.useState([{id:"init-greet",text:"Hello! I'm here to help you with mental health, feel free to ask anything ðŸ˜Š",sender:"bot"}]),[u,g]=o.useState(""),[l,b]=o.useState(!1),[I,C]=o.useState(null),p=o.useRef(null),j=o.useRef(!0);o.useEffect(()=>{j.current?j.current=!1:p.current&&(p.current.scrollTop=p.current.scrollHeight)},[d]);const M=o.useCallback(async(e,r)=>{try{await navigator.clipboard.writeText(e),C(r),setTimeout(()=>C(null),1500)}catch{}},[]),m=o.useCallback(async e=>{var w,F;const r=e??u.trim();if(!r||l)return;const i={id:`user-${Date.now()}`,text:r,sender:"user"};y(s=>[...s,i,{id:`bot-loading-${Date.now()}`,text:"...",sender:"bot"}]),g(""),b(!0);const v=d.filter(s=>s.sender!=="system"&&!s.id.startsWith("bot-loading")).map(s=>({role:s.sender==="user"?"user":"model",parts:[{text:s.text}]}));v.push({role:"user",parts:[{text:r}]});try{const s=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyA1hddmhEKCcKr_WdWR2B8YJJHGg5XFQUQ",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({system_instruction:{parts:[{text:se}]},contents:v})}),n=await s.json();let x;if(!s.ok||n.error||!((w=n.candidates)!=null&&w.length)){const c=((F=n.error)==null?void 0:F.message)||"Error fetching response.";x={id:`error-${Date.now()}`,text:c,sender:"error"}}else{const c=n.candidates[0].content.parts[0].text.trim()||"No response.";x={id:`bot-${Date.now()}`,text:c,sender:"bot"}}y(c=>c.filter(O=>!O.id.startsWith("bot-loading")).concat(x))}catch{y(s=>s.filter(n=>!n.id.startsWith("bot-loading")).concat({id:`error-${Date.now()}`,text:"Network error.",sender:"error"}))}finally{b(!1)}},[u,l,d]),N=e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),m())},T=()=>t.jsx("div",{className:"flex space-x-1 items-center",children:[0,1,2].map(e=>t.jsx(B.div,{className:"w-2 h-2 rounded-full",animate:{opacity:[.3,1,.3]},transition:{repeat:1/0,duration:.8,delay:e*.2},style:{backgroundColor:h}},e))}),S=e=>e.text==="..."&&e.sender==="bot"?T():e.sender==="bot"?t.jsx(_,{remarkPlugins:[q],components:{a:({...r})=>t.jsx("a",{...r,style:{color:a}})},children:e.text}):t.jsx("p",{className:"whitespace-pre-wrap",children:e.text});return t.jsx(D,{children:t.jsxs("div",{className:"relative overflow-hidden min-h-screen",children:[t.jsx("div",{className:"absolute inset-0 -z-10",children:t.jsxs("svg",{className:"w-full h-full",preserveAspectRatio:"none",viewBox:"0 0 1440 320",children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"wave-gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[t.jsx("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:"0.4"}),t.jsx("stop",{offset:"100%",stopColor:"#E0F2FE",stopOpacity:"0.1"})]})}),t.jsx("path",{fill:"url(#wave-gradient)",d:"M0,96L48,90.7C96,85,192,75,288,74.7C384,75,480,85,576,106.7C672,128,768,160,864,165.3C960,171,1056,149,1152,149.3C1248,149,1344,171,1392,181.3L1440,192L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"})]})}),t.jsx("div",{style:{backgroundColor:J},className:"w-full py-8 px-4",children:t.jsx(H,{title:"Virtual Therapist",subtitle:"Your friendly mental health assistant",alignment:"center"})}),t.jsxs("div",{style:{backgroundColor:"transparent"},className:"flex flex-col items-center py-8 px-4",children:[t.jsx("div",{className:"max-w-3xl w-full mt-4 flex flex-wrap gap-2 justify-center",children:re.map((e,r)=>t.jsx(k,{size:"sm",onClick:()=>m(e),disabled:l,style:{backgroundColor:a,color:"#FFF",borderColor:a},onMouseOver:i=>i.currentTarget.style.backgroundColor=h,onMouseOut:i=>i.currentTarget.style.backgroundColor=a,children:e},r))}),t.jsx(P,{className:"w-full max-w-3xl mt-4 shadow-lg",style:{backgroundColor:U,borderColor:f},children:t.jsxs(R,{className:"flex flex-col h-[70vh] p-0",children:[t.jsx("div",{ref:p,className:"flex-1 overflow-y-auto p-4 space-y-4",children:d.map(e=>t.jsxs(B.div,{className:z("flex items-start gap-3",e.sender==="user"?"justify-end":"justify-start"),initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.sender==="bot"&&e.text!=="..."&&t.jsx(A,{size:24,style:{color:h}}),t.jsx("div",{className:"p-3 rounded-lg max-w-[75%]",style:{backgroundColor:e.sender==="user"?Q:e.sender==="error"?ee:V,color:e.sender==="user"?X:e.sender==="error"?te:Z,fontStyle:e.text==="..."?"italic":"normal"},children:S(e)}),e.sender==="user"&&t.jsx(K,{size:24,style:{color:E}}),e.sender==="bot"&&e.text!=="..."&&t.jsx("button",{onClick:()=>M(e.text,e.id),title:"Copy",className:"p-1 rounded-md hover:bg-gray-100",children:I===e.id?t.jsx(Y,{size:18,style:{color:a}}):t.jsx(G,{size:18,style:{color:E}})})]},e.id))}),t.jsxs("div",{className:"flex items-center p-4	border-t gap-2",style:{borderColor:f},children:[t.jsx(W,{value:u,onChange:e=>g(e.target.value),onKeyDown:N,disabled:l,placeholder:"How can I help you today?",className:"flex-grow rounded-lg px-3 py-2",style:{backgroundColor:"#FFF",color:"#1F2937",borderColor:f}}),t.jsx(k,{onClick:()=>m(),disabled:l||!u.trim(),style:{backgroundColor:a,color:"#FFF",borderColor:a},onMouseOver:e=>e.currentTarget.style.backgroundColor=h,onMouseOut:e=>e.currentTarget.style.backgroundColor=a,children:t.jsx($,{size:20})})]})]})})]})]})})};export{fe as default};
