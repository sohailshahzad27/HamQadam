import{r as n,j as e,c as M}from"./index-DXf8nAVY.js";import{M as z}from"./MainLayout-CzrU36Jf.js";import{S as E}from"./section-heading-FuyfHM6C.js";import{B as C}from"./index-BfwGU7cQ.js";import{I}from"./input-DsrJwZ2l.js";import{C as A,d as P}from"./card-DwPcjQ2E.js";import{m as b}from"./proxy-CP4viMwe.js";import{B as T}from"./bot-CkqC9M8G.js";import{U as W}from"./user-C6N0Yc8t.js";import{S as D}from"./send-Blw69xxq.js";import{M as L,r as R}from"./index-bx_cZ3Qk.js";import"./x-CYZ6D4SI.js";const B='You are Muhafiz, a virtual assistant embodying a Pakistani law and order and safety situation analytic expert specializing exclusively in safety concern. Your sole purpose is to provide information and answer questions strictly based on safety concerns. If a user asks about any topic other than safety concerns you must politely state that you are unable to assist as your expertise is limited to this specific legal area. When asked "Who are you?" or "What is your name?", respond clearly: "My name is Muhafiz, and I am a virtual assistant specializing Safety concern." Ensure your responses are comprehensive and explain the relevant legal points in detail, avoiding short or brief answers. Structure your answers clearly, potentially using bullet points or numbered lists for complex information. Your tone should be professional, informative, and empathetic.',O=["What are common safety risks in public places in Pakistan?","How can I prepare a home emergency kit?","What is the emergency helpline number in Pakistan?","Tips for staying safe online?","How to report street harassment?"],K=()=>{const i=Array.from({length:8}).map((a,o)=>{const r=["circle","square","triangle"],h=r[Math.floor(Math.random()*r.length)],l=100+Math.random()*200,m={top:Math.random()*100,left:Math.random()*100},f=Math.random()*3,x=15+Math.random()*10,y=`rgba(${Math.floor(200+Math.random()*55)},${Math.floor(100+Math.random()*155)},${Math.floor(150+Math.random()*105)},${.2+Math.random()*.2})`;return{id:o,type:h,size:l,position:m,delay:f,duration:x,color:y}}),p=(a,o)=>({width:0,height:0,borderLeft:`${a/2}px solid transparent`,borderRight:`${a/2}px solid transparent`,borderBottom:`${a}px solid ${o}`});return e.jsx("div",{className:"absolute inset-0 -z-20 overflow-hidden",children:i.map(a=>{const o={position:"absolute",top:`${a.position.top}%`,left:`${a.position.left}%`,filter:"blur(80px)"};let r={};return a.type==="circle"?r={...o,width:a.size,height:a.size,borderRadius:"50%",background:a.color}:a.type==="square"?r={...o,width:a.size,height:a.size,background:a.color}:r={...o,...p(a.size,a.color)},e.jsx(b.div,{style:r,animate:{x:["0%",`${Math.random()*40-20}%`,"0%"],y:["0%",`${Math.random()*40-20}%`,"0%"],rotate:Math.random()*360},transition:{repeat:1/0,ease:"easeInOut",duration:a.duration,delay:a.delay}},a.id)})})},ee=()=>{const[i,p]=n.useState([{id:"init-greet",text:"Asalam-o-Alaikum! I am Muhafiz. Ask me about safety concerns, or try one of the examples below.",sender:"bot"}]),[a,o]=n.useState(""),[r,h]=n.useState(!1),l=n.useRef(null);n.useEffect(()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},[i]),n.useCallback(async(t,d)=>{try{await navigator.clipboard.writeText(t)}catch(g){console.error("Copy failed",g)}},[]);const m=n.useCallback(async t=>{var v,j;const d=t??a.trim();if(!d||r)return;const g={id:`user-${Date.now()}`,text:d,sender:"user"},k={id:`bot-loading-${Date.now()}`,text:"...",sender:"bot"};p(s=>[...s,g,k]),o(""),h(!0);const N="AIzaSyA1hddmhEKCcKr_WdWR2B8YJJHGg5XFQUQ",w=i.filter(s=>s.sender!=="system"&&!s.id.startsWith("bot-loading")).map(s=>({role:s.sender==="user"?"user":"model",parts:[{text:s.text}]}));w.push({role:"user",parts:[{text:d}]});try{const s=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${N}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({system_instruction:{parts:[{text:B}]},contents:w})}),c=await s.json();let u;!s.ok||c.error||!((v=c.candidates)!=null&&v.length)?u={id:`error-${Date.now()}`,text:`Error: ${((j=c.error)==null?void 0:j.message)||"Unknown error"}`,sender:"error"}:u={id:`bot-${Date.now()}`,text:c.candidates[0].content.parts[0].text.trim()||"No response.",sender:"bot"},p(S=>S.filter($=>!$.id.startsWith("bot-loading")).concat(u))}catch(s){console.error("Fetch error",s),p(c=>c.filter(u=>!u.id.startsWith("bot-loading")).concat({id:`error-${Date.now()}`,text:"Network Error",sender:"error"}))}finally{h(!1)}},[a,r,i]),f=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),m())},x=()=>e.jsx("div",{className:"flex space-x-1",children:[0,1,2].map(t=>e.jsx(b.div,{className:"w-2 h-2 bg-purple-400 rounded-full",animate:{opacity:[.3,1,.3]},transition:{repeat:1/0,duration:.8,delay:t*.2}},t))}),y=t=>t.text==="..."&&t.sender==="bot"?x():t.sender==="bot"?e.jsx(L,{remarkPlugins:[R],children:t.text}):e.jsx("p",{className:"whitespace-pre-wrap",children:t.text});return e.jsx(z,{children:e.jsxs("div",{className:"relative min-h-screen overflow-hidden",children:[e.jsx(K,{}),e.jsx("div",{className:"absolute inset-0 -z-10",children:e.jsxs("svg",{className:"w-full h-full",preserveAspectRatio:"none",viewBox:"0 0 1440 320",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"wave-gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4F46E5",stopOpacity:"0.4"}),e.jsx("stop",{offset:"100%",stopColor:"#C7D2FE",stopOpacity:"0.1"})]})}),e.jsx("path",{fill:"url(#wave-gradient)",d:"M0,96L48,90.7C96,85,192,75,288,74.7C384,75,480,85,576,106.7C672,128,768,160,864,165.3C960,171,1056,149,1152,149.3C1248,149,1344,171,1392,181.3L1440,192L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"})]})}),e.jsxs("div",{className:"flex flex-col items-center py-8 px-4",children:[e.jsx("div",{className:"w-full py-8 px-4 bg-indigo-50/90 backdrop-blur-sm",children:e.jsx(E,{title:"Muhafiz",subtitle:"AI Assistant for Safety concerns",alignment:"center"})}),e.jsx("div",{className:"max-w-3xl  w-full mt-4  flex flex-wrap gap-2 justify-center",children:O.map((t,d)=>e.jsx(C,{size:"sm",onClick:()=>m(t),disabled:r,className:"bg-purple-500 text-white hover:bg-purple-400 hover:text-white",children:t},d))}),e.jsx(A,{className:"w-full max-w-3xl mt-4 bg-white/80 backdrop-blur-md shadow-lg",children:e.jsxs(P,{className:"flex flex-col h-[70vh] p-0",children:[e.jsx("div",{ref:l,className:"flex-1 overflow-y-auto p-4 space-y-4",children:i.map(t=>e.jsxs(b.div,{className:M("flex items-start gap-3",t.sender==="user"?"justify-end":"justify-start"),initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[t.sender==="bot"&&t.text!=="..."&&e.jsx(T,{className:"text-purple-600"}),e.jsx("div",{className:M("p-3 rounded-lg",t.sender==="user"?"bg-pink-500 text-white":"bg-gray-100 text-gray-800"),children:y(t)}),t.sender==="user"&&e.jsx(W,{className:"text-blue-600"})]},t.id))}),e.jsxs("div",{className:"flex items-center p-4 border-t bg-white/70",children:[e.jsx(I,{value:a,onChange:t=>o(t.target.value),onKeyDown:f,disabled:r,placeholder:"Ask..."}),e.jsx(C,{onClick:()=>m(),disabled:r||!a.trim(),children:e.jsx(D,{})})]})]})})]})]})})};export{ee as default};
